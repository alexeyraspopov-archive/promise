!function(a){"use strict";function b(){this.pending=[]}b.prototype.then=function(a,c){var d=new b;return this.pending.push({promise:d,resolve:a,reject:c||function(){}}),d},b.prototype.resolve=function(a){this.complete("resolve",a)},b.prototype.reject=function(a){this.complete("reject",a)},b.prototype.complete=function(a,c){for(var d,e,f;this.pending.length;)d=this.pending.shift(),f=d.promise,e=d[a](c),e instanceof b?e.then(function(a){f.resolve(a)},function(a){f.reject(a)}):f[a](e)},a("Promise",b)}(function(a,b){"function"==typeof define&&define.amd?define(function(){return b}):"object"==typeof module&&"object"==typeof module.exports?module.exports=b:window[a]=b});