!function(a){"use strict";function b(){this.pending=[]}b.prototype.then=function(a,c){var d=new b;return this.pending.push({promise:d,resolve:a,reject:c||function(){}}),d},b.prototype.resolve=function(a){this.complete("resolve",a)},b.prototype.reject=function(a){this.complete("reject",a)},b.prototype.complete=function(a,c){for(var d,e,f;this.pending.length;)d=this.pending.shift(),f=d.promise,e=d[a](c),e instanceof b?e.then(f.resolve.bind(f),f.reject.bind(f)):f[a](e)},a("Promise",b)}(function(a,b){"function"==typeof define&&define.amd?define(function(){return b}):"object"==typeof window?window[a]=b:module.exports=b});